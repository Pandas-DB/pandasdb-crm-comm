checkContent:
  handler: src/handlers/check_content.lambda_handler
  name: ${self:service}-${self:provider.stage}-check-content
  description: Check if WhatsApp message has content
  
checkPhoneSpammer:
  handler: src/handlers/check_phone_spammer.lambda_handler
  name: ${self:service}-${self:provider.stage}-check-phone-spammer
  description: Check phone exists and spammer status
  
detectSpam:
  handler: src/handlers/detect_spam.lambda_handler
  name: ${self:service}-${self:provider.stage}-detect-spam
  description: AI-powered spam detection using Bedrock
  
generateSpamResponse:
  handler: src/handlers/generate_spam_response.lambda_handler
  name: ${self:service}-${self:provider.stage}-generate-spam-response
  description: Generate spam warning/blocking responses
  
generateAiResponse:
  handler: src/handlers/generate_ai_response.lambda_handler
  name: ${self:service}-${self:provider.stage}-generate-ai-response
  description: Generate AI responses for normal messages

sendMessage:
  handler: src/handlers/send_message.lambda_handler
  name: ${self:service}-${self:provider.stage}-send-message
  description: Send messages through various platforms (WhatsApp, Telegram, etc.)
  
webhookHandler:
  handler: src/handlers/webhook_handler.lambda_handler
  reservedConcurrency: 10
  name: ${self:service}-${self:provider.stage}-webhook-handler
  description: Handle webhooks from various platforms and start Step Functions
  events:
    - http:
        path: /webhook/phone
        method: post
        cors: true
        request:
          parameters:
            querystrings:
              platform: true

leadsApi:
  handler: src/handlers/leads_api.lambda_handler
  name: ${self:service}-${self:provider.stage}-leads-api
  description: Create and manage leads with contact methods
  events:
    - http:
        path: /api/leads
        method: post
        cors: true
